{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://mm-stationery.com/schemas/recipe-metaobject.json",
  "title": "Recipe Metaobject",
  "description": "Schema for recipe metaobject stored in Shopify",
  "type": "object",
  "required": [
    "type",
    "fields"
  ],
  "properties": {
    "type": {
      "type": "string",
      "const": "recipe",
      "description": "Metaobject type identifier"
    },
    "handle": {
      "type": "string",
      "pattern": "^[a-z0-9-]+$",
      "maxLength": 255,
      "description": "URL-safe handle for the recipe"
    },
    "fields": {
      "type": "object",
      "required": [
        "name",
        "ingredients",
        "ingredient_quantities",
        "is_active"
      ],
      "properties": {
        "name": {
          "type": "string",
          "minLength": 1,
          "maxLength": 255,
          "description": "Recipe display name"
        },
        "description": {
          "type": "string",
          "maxLength": 2000,
          "description": "Recipe description or instructions"
        },
        "ingredients": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "required": ["gid", "type"],
            "properties": {
              "gid": {
                "type": "string",
                "pattern": "^gid://shopify/Metaobject/[0-9]+$",
                "description": "Global ID reference to ingredient metaobject"
              },
              "type": {
                "type": "string",
                "const": "ingredient"
              }
            }
          },
          "description": "List of ingredient references used in this recipe"
        },
        "ingredient_quantities": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "required": [
              "ingredient_gid",
              "quantity_needed",
              "unit_type_gid"
            ],
            "properties": {
              "ingredient_gid": {
                "type": "string",
                "pattern": "^gid://shopify/Metaobject/[0-9]+$",
                "description": "Ingredient GID (must match ingredients list)"
              },
              "quantity_needed": {
                "type": "number",
                "exclusiveMinimum": 0,
                "description": "Quantity of this ingredient needed"
              },
              "unit_type_gid": {
                "type": "string",
                "pattern": "^gid://shopify/Metaobject/[0-9]+$",
                "description": "Unit type GID for the quantity"
              }
            }
          },
          "description": "Quantities needed for each ingredient (parallel array to ingredients)"
        },
        "is_active": {
          "type": "boolean",
          "default": true,
          "description": "Soft delete flag - false if recipe is deleted"
        },
        "created_at": {
          "type": "string",
          "format": "date-time",
          "description": "Creation timestamp (ISO 8601)"
        },
        "updated_at": {
          "type": "string",
          "format": "date-time",
          "description": "Last update timestamp (ISO 8601)"
        }
      }
    },
    "createdAt": {
      "type": "string",
      "format": "date-time",
      "description": "Creation timestamp (managed by Shopify)"
    },
    "updatedAt": {
      "type": "string",
      "format": "date-time",
      "description": "Last update timestamp (managed by Shopify)"
    }
  },
  "examples": [
    {
      "type": "recipe",
      "handle": "basic-white-bread",
      "fields": {
        "name": "Basic White Bread",
        "description": "Simple white bread recipe using flour, water, yeast, and salt",
        "ingredients": [
          {
            "gid": "gid://shopify/Metaobject/12345",
            "type": "ingredient"
          },
          {
            "gid": "gid://shopify/Metaobject/12346",
            "type": "ingredient"
          },
          {
            "gid": "gid://shopify/Metaobject/12347",
            "type": "ingredient"
          }
        ],
        "ingredient_quantities": [
          {
            "ingredient_gid": "gid://shopify/Metaobject/12345",
            "quantity_needed": 500,
            "unit_type_gid": "gid://shopify/Metaobject/67890"
          },
          {
            "ingredient_gid": "gid://shopify/Metaobject/12346",
            "quantity_needed": 300,
            "unit_type_gid": "gid://shopify/Metaobject/67891"
          },
          {
            "ingredient_gid": "gid://shopify/Metaobject/12347",
            "quantity_needed": 10,
            "unit_type_gid": "gid://shopify/Metaobject/67890"
          }
        ],
        "is_active": true,
        "created_at": "2025-09-30T10:30:00Z",
        "updated_at": "2025-09-30T10:30:00Z"
      },
      "createdAt": "2025-09-30T10:30:00Z",
      "updatedAt": "2025-09-30T10:30:00Z"
    }
  ]
}